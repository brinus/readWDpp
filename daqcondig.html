<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>readWDpp: How to configurate the DAQEvent class</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">readWDpp
   </div>
   <div id="projectbrief">Read binary files from DRS and WDB</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">How to configurate the <a class="el" href="classDAQEvent.html" title="Main class to store voltage and time values.">DAQEvent</a> class </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>how to use the <a class="el" href="classDAQConfig.html">DAQConfig</a> class.</p>
<h2><a class="anchor" id="autotoc_md4"></a>
Introduction</h2>
<p>The class <a class="el" href="classDAQConfig.html">DAQConfig</a> gives to the user the possibility to customize three values available, differently for each board and channel:</p><ol type="1">
<li>The <em>integration window</em>, this constrols where the waveform has to be integrated and where to look for peaks.</li>
<li>The <em>pedestal interval</em>, this controls where the pedestal is evaluated.</li>
<li>The <em>peak threshold</em>, this controls the value in Volts requested by some methods (of <a class="el" href="classDAQEvent.html">DAQEvent</a>) to search for a peak.</li>
</ol>
<p>The various setters are available via the use of <a class="el" href="classDAQEvent.html">DAQEvent</a>, this class contains a <a class="el" href="classDAQConfig.html">DAQConfig</a> data member called <code>config_</code>.</p>
<h2><a class="anchor" id="autotoc_md5"></a>
How to use the setters</h2>
<p>There are two possibilities:</p><ol type="1">
<li>Call the setter before the events are read (the initialisation part). This set the various parameters to a costant values for the whole script.</li>
<li>Call the setter at every event's <code>while</code> loop. This can be done if the user wants to update the parameters at every <code>while</code> cycle.</li>
</ol>
<p>In the first case the user must use, before calling any setter, the method <a class="el" href="classDAQEvent.html#a72f746d12c52dfbeece3260cb305ea9b">DAQEvent::MakeConfig()</a>: </p><div class="fragment"><div class="line"><a class="code hl_class" href="classDAQFile.html">DAQFile</a> file(<span class="stringliteral">&quot;path/to/data.dat&quot;</span>);</div>
<div class="line"><a class="code hl_class" href="classDRSEvent.html">DRSEvent</a> event;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">event</span>.<a class="code hl_function" href="classDAQEvent.html#a72f746d12c52dfbeece3260cb305ea9b">MakeConfig</a>(file);</div>
<div class="line"><span class="keyword">event</span>.SetIntWindow(400, 600);</div>
<div class="line"><span class="keyword">event</span>.GetChannel(0, 1).SetPedInterval(100, 200);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">while</span> (file &gt;&gt; event)</div>
<div class="line">{</div>
<div class="line">    ...</div>
<div class="line">}</div>
<div class="ttc" id="aclassDAQEvent_html_a72f746d12c52dfbeece3260cb305ea9b"><div class="ttname"><a href="classDAQEvent.html#a72f746d12c52dfbeece3260cb305ea9b">DAQEvent::MakeConfig</a></div><div class="ttdeci">void MakeConfig(DAQFile &amp;file)</div><div class="ttdoc">Method to simply call DAQConfig::MakeConfig().</div><div class="ttdef"><b>Definition:</b> <a href="readWD_8hh_source.html#l00128">readWD.hh:128</a></div></div>
<div class="ttc" id="aclassDAQFile_html"><div class="ttname"><a href="classDAQFile.html">DAQFile</a></div><div class="ttdoc">Class to manage the file and the outputing of data in a DAQEvent instance.</div><div class="ttdef"><b>Definition:</b> <a href="readWD_8hh_source.html#l00202">readWD.hh:203</a></div></div>
<div class="ttc" id="aclassDRSEvent_html"><div class="ttname"><a href="classDRSEvent.html">DRSEvent</a></div><div class="ttdoc">Specialization of DAQEvent to a DRS board.</div><div class="ttdef"><b>Definition:</b> <a href="readWD_8hh_source.html#l00186">readWD.hh:187</a></div></div>
</div><!-- fragment --><p> Given that we want to call some setter before the statement <code>file &gt;&gt; event</code>, we write <code>event.MakeConfig(file)</code>, the method <a class="el" href="classDAQEvent.html#a72f746d12c52dfbeece3260cb305ea9b">DAQEvent::MakeConfig()</a> calls the same method of the <code>config_</code> data member, the file passed as input is used to gather the size of the board and channel map. During the call to the first setter no board or channel were given, thus the method <a class="el" href="classDAQEvent.html#aae14678619562b01b8469eb415b53eb4">DAQEvent::SetIntWindow()</a> will call the setter on all the boards and channel found in the file. With the second setter <a class="el" href="classDAQEvent.html#a0ba141370d89ff2e417adea861f23895">DAQEvent::SetPedInterval()</a> we are changing the pedestal interval on board-channel 0-1.</p>
<p>In the second case we want to call the setter during the reading of the event: </p><div class="fragment"><div class="line"><a class="code hl_class" href="classDAQFile.html">DAQFile</a> file(<span class="stringliteral">&quot;path/to/data.dat&quot;</span>);</div>
<div class="line"><a class="code hl_class" href="classDRSEvent.html">DRSEvent</a> event;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> i = 0, a, b;</div>
<div class="line"><span class="keywordtype">int</span> n_intervals = 10;</div>
<div class="line"><span class="keywordtype">int</span> l_interval = 100;</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">while</span> (file &gt;&gt; event) <span class="comment">// Autocall to DAQEvent::MakeConfig() during the first cycle</span></div>
<div class="line">{</div>
<div class="line">    a = (i % n_intervals) / n_intervals * (<a class="code hl_define" href="readWD_8hh.html#a0606d74796559e9e9b17d890a305d35a">SAMPLES_PER_WAVEFORM</a> - l_interval - 1);</div>
<div class="line">    b = a + l_interval;</div>
<div class="line">    <span class="keyword">event</span>.<a class="code hl_function" href="classDAQEvent.html#ab1176184ce5206715972cb5fb965a8b9">GetChannel</a>(0, 0).<a class="code hl_function" href="classDAQEvent.html#aae14678619562b01b8469eb415b53eb4">SetIntWindow</a>(a, b);</div>
<div class="line">    ++i;</div>
<div class="line">    ...</div>
<div class="line">}</div>
<div class="ttc" id="aclassDAQEvent_html_aae14678619562b01b8469eb415b53eb4"><div class="ttname"><a href="classDAQEvent.html#aae14678619562b01b8469eb415b53eb4">DAQEvent::SetIntWindow</a></div><div class="ttdeci">void SetIntWindow(int, int)</div><div class="ttdoc">Set the integration window passing two indices that go from 0 to SAMPLES_PER_WAVEFORM.</div><div class="ttdef"><b>Definition:</b> <a href="readWD_8cc_source.html#l00191">readWD.cc:191</a></div></div>
<div class="ttc" id="aclassDAQEvent_html_ab1176184ce5206715972cb5fb965a8b9"><div class="ttname"><a href="classDAQEvent.html#ab1176184ce5206715972cb5fb965a8b9">DAQEvent::GetChannel</a></div><div class="ttdeci">DAQEvent &amp; GetChannel(const int &amp;, const int &amp;)</div><div class="ttdoc">Select the channel to analyze.</div><div class="ttdef"><b>Definition:</b> <a href="readWD_8cc_source.html#l00100">readWD.cc:100</a></div></div>
<div class="ttc" id="areadWD_8hh_html_a0606d74796559e9e9b17d890a305d35a"><div class="ttname"><a href="readWD_8hh.html#a0606d74796559e9e9b17d890a305d35a">SAMPLES_PER_WAVEFORM</a></div><div class="ttdeci">#define SAMPLES_PER_WAVEFORM</div><div class="ttdoc">The number of samples made by the waveforms, both DRS and WDB.</div><div class="ttdef"><b>Definition:</b> <a href="readWD_8hh_source.html#l00025">readWD.hh:25</a></div></div>
</div><!-- fragment --><p> In this example the integration window is updated at every cycle for board/channel 0-1. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
